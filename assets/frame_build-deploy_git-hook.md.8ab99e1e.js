import{_ as s,b as a,c as o,h as n}from"./app.7f62d93c.js";const h='{"title":"\u4EE3\u7801\u63D0\u4EA4\u89C4\u8303","description":"","frontmatter":{},"headers":[{"level":2,"title":"yorkie","slug":"yorkie"},{"level":2,"title":"simple-git-hooks","slug":"simple-git-hooks"},{"level":2,"title":"lint-staged","slug":"lint-staged"},{"level":2,"title":"verifyCommit","slug":"verifycommit"}],"relativePath":"frame/build-deploy/git-hook.md","lastUpdated":1653309389000}',e={},p=n(`<h1 id="git-hook" tabindex="-1">\u4EE3\u7801\u63D0\u4EA4\u89C4\u8303 <a class="header-anchor" href="#git-hook" aria-hidden="true">#</a></h1><p>\u4F7F\u7528 git \u521D\u59CB\u5316\u7684\u9879\u76EE\uFF0C\u4F1A\u5728\u9879\u76EE\u6839\u8DEF\u5F84\u751F\u6210 <code>.git</code> \u6587\u4EF6\u5939 (\u9ED8\u8BA4\u9690\u85CF)\uFF0C\u5176\u4E2D hooks \u76EE\u5F55\u4E0B\u4F1A\u751F\u6210\u4E00\u4E9B\u94A9\u5B50\u6587\u4EF6\uFF0C\u5982\uFF1A<code>pre-commit.sample</code> \u548C <code>pre-push.sample</code>\uFF0Cgit hook \u662F\u6BCF\u6B21\u6267\u884C git \u64CD\u4F5C\u65F6\u90FD\u4F1A\u8FD0\u884C\u7684\u547D\u4EE4\u6216\u811A\u672C\uFF0C\u53BB\u9664 <code>.sample</code> \u540E\u7F00\u4F7F\u5176\u751F\u6548\u3002</p><p>\u901A\u8FC7\u4FEE\u6539\u94A9\u5B50\u6587\u4EF6\uFF0C\u53EF\u4EE5\u6267\u884C\u4E00\u4E9B\u89C4\u8303\u5316\u64CD\u4F5C\uFF0C\u5982\uFF1A\u4EE3\u7801\u98CE\u683C\u68C0\u67E5\uFF0C\u63D0\u4EA4\u4FE1\u606F\u6821\u9A8C\u7B49\u3002\u4E00\u822C <code>.git</code> \u6587\u4EF6\u5939\u5E76\u4E0D\u4F1A\u88AB\u4E0A\u4F20\u5230\u4EE3\u7801\u4ED3\u5E93\uFF0C\u6240\u4EE5\u5728\u672C\u5730\u4FEE\u6539\u94A9\u5B50\u6587\u4EF6\u5E76\u4E0D\u53EF\u53D6\uFF0C\u4F7F\u7528 <code>husky</code> \u548C <code>yorkie</code> \u7B49\u5DE5\u5177\u4F7F\u7BA1\u7406 git \u94A9\u5B50\u66F4\u52A0\u7B80\u5355\u3002</p><h2 id="yorkie" tabindex="-1">yorkie <a class="header-anchor" href="#yorkie" aria-hidden="true">#</a></h2><p><a href="https://github.com/yyx990803/yorkie" target="_blank" rel="noopener noreferrer">yorkie</a> \u662F\u5C24\u96E8\u6EAA fork \u81EA <a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky</a> \u540E\u5E76\u505A\u4E86\u4E00\u4E9B\u5C0F\u4FEE\u6539\uFF0C\u6BD4\u8D77 husky \u4F7F\u7528\u66F4\u52A0\u7B80\u4FBF\u3002</p><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gitHooks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">pre-commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">foo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u67E5\u770B <code>.git/hooks</code> \u6587\u4EF6\u5939\u662F\u5426\u5B58\u5728 pre-commit \u6587\u4EF6\u786E\u4FDD\u5176\u751F\u6548\uFF0Ccommit-message \u63D0\u4EA4\u4FE1\u606F\u6587\u4EF6 <code>.git/COMMIT_EDITMSG</code></p></div><h2 id="simple-git-hooks" tabindex="-1">simple-git-hooks <a class="header-anchor" href="#simple-git-hooks" aria-hidden="true">#</a></h2><p>vite \u9879\u76EE\u4E2D\u4F7F\u7528 <a href="https://github.com/toplenboren/simple-git-hooks" target="_blank" rel="noopener noreferrer">simple-git-hooks</a> \u4EE3\u66FF yorkie</p><p>vite \u9879\u76EE\u4E0D\u652F\u6301\u5728 package.json \u4E2D\u914D\u7F6E gitHooks\uFF0Cvue-cli \u9879\u76EE\u80FD\u652F\u6301\u662F\u56E0\u4E3A\u5728\u5B89\u88C5\u4E4B\u540E\uFF0C@vue/cli-service \u4F1A\u5B89\u88C5 yorkie\uFF0C\u8BA9\u4F60\u5728 package.json \u7684 gitHooks \u5B57\u6BB5\u4E2D\u65B9\u4FBF\u5730\u6307\u5B9A Git hook\u3002</p><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">simple-git-hooks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">pre-commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">npx lint-staged</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">pre-push</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cd ../../ &amp;&amp; npm run format</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u521D\u59CB\u5316\u6267\u884C <code>pnpx simple-git-hooks</code> \u751F\u6210\u94A9\u5B50\u6587\u4EF6</p><h2 id="lint-staged" tabindex="-1">lint-staged <a class="header-anchor" href="#lint-staged" aria-hidden="true">#</a></h2><blockquote><p><a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged</a> \u662F\u4E00\u4E2A\u5BF9\u6682\u5B58\u7684 git \u6587\u4EF6\u8FD0\u884C linter \u7684\u5DE5\u5177\uFF0C\u4E0D\u8981\u8BA9 \u{1F4A9} \u6E9C\u8FDB\u4F60\u7684\u4EE3\u7801\u5E93\uFF01</p></blockquote><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lint-staged</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">*.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eslint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prettier --write</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="verifycommit" tabindex="-1">verifyCommit <a class="header-anchor" href="#verifycommit" aria-hidden="true">#</a></h2><p>\u4F7F\u7528 verifyCommit \u811A\u672C\u5BF9\u63D0\u4EA4\u4FE1\u606F\u8FDB\u884C\u89C4\u8303\u5316\u6821\u9A8C</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mkdir scripts</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> scripts/verifyCommit.js</span></span>
<span class="line"></span></code></pre></div><div class="language-json"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// Git hooks</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">commit-msg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node scripts/verifyCommit.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8BE6\u60C5\u67E5\u770B <a href="./verify-commit.html">verify-commit.md</a></p>`,20),l=[p];function t(c,r,i,D,y,F){return a(),o("div",null,l)}var C=s(e,[["render",t]]);export{h as __pageData,C as default};
